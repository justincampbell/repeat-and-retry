#!/usr/bin/env sh

OPTIND=1

every=1

while getopts "01n:" opt; do
  case "$opt" in
    0)
      code=0
      ;;
    1)
      code=1
      ;;
    n)
      every=$OPTARG
      ;;
  esac
done

shift $((OPTIND-1))

while true; do
  date

  $*

  if [ $? == $code ]; then exit $code; fi

  sleep $every
done
