#!/usr/bin/env sh

OPTIND=1

every=1

while getopts "n:" opt; do
  case "$opt" in
    n)
      every=$OPTARG
      ;;
  esac
done

shift $((OPTIND-1))

while true; do
  date

  $*

  if [ $? == 0 ]; then exit 0; fi

  sleep $every
done
